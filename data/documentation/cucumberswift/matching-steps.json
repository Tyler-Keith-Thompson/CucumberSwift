{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Matching-with-Cucumber-Expressions","level":2,"type":"heading","text":"Matching with Cucumber Expressions"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Cucumber has "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/cucumber\/cucumber-expressions#readme"},{"type":"text","text":" that CucumberSwift supports. These are an alternative to regular expressions that are a little more readable. They aren’t nearly as powerful when it comes to precise matching, but they can be extended with regular expressions and can very likely meet the majority of use-cases. Normally, Cucumber implementations use expressions by default in languages that have regular expression literals. However, because CucumberSwift was created long before Swift supported regex literals they are "},{"type":"emphasis","inlineContent":[{"type":"text","text":"not"}]},{"type":"text","text":" the default."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Imagine the following step:"}]},{"type":"codeListing","syntax":"gherkin","code":["Given there are 3 flights from lax."]},{"type":"paragraph","inlineContent":[{"type":"text","text":"We could match it in CucumberSwift like this:"}]},{"type":"codeListing","syntax":"swift","code":["Given(\"there is\/are\/were {int} flight(s) from {airport}.\" as CucumberExpression) { match, _ in ","    XCTAssertEqual(match[\\.int, index: 0], 3)","    XCTAssertEqual(try match.first(\\.int), 3)","    XCTAssertEqual(try match.last(\\.int), 3)","    XCTAssertEqual(try match.allParameters(\\.int), [3])","    XCTAssertIdentical(match[\\.airport, index: 0], Airport.lax)","    XCTAssertIdentical(try match.first(\\.airport), Airport.lax)","    XCTAssertIdentical(try match.last(\\.airport), Airport.lax)","    XCTAssertEqual(try match.allParameters(\\.airport).count, 1)","    XCTAssertIdentical(try match.allParameters(\\.airport).first, Airport.lax)","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Notice that "},{"type":"codeVoice","code":"{airport}"},{"type":"text","text":" is a custom parameter. It’s type-safe which is great, but how do we create our own custom parameters?"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Just an example of airports, this is simply your model.","class Airport {","    static let lax = Airport()","}","","\/\/ This extension must contain all custom parameters you want to use.","extension CucumberExpression: CustomParameters {","    public static var additionalParameters: [CucumberSwiftExpressions.AnyParameter] {","        [","            AirportParameter().eraseToAnyParameter()","        ]","    }","}","","\/\/ The airport parameter","struct AirportParameter: Parameter {","    enum ParameterError: Error {","        case airportNotFound","    }","","    \/\/ Globally unique name for this parameter","    static let name = \"airport\"","","    \/\/ A regular expression to use to match this parameter.","    let regexMatch = #\"[A-Z]{3}\"#","","    \/\/ A transform from the matched string to whatever type you want","    func convert(input: String) throws -> Airport {","        switch input.lowercased() {","            case \"lax\": return Airport.lax","            default:","                throw ParameterError.airportNotFound","        }","    }","}","","\/\/ A convenience property to use that keypath syntax you saw in the previous example.","extension Match {","    var airport: AirportParameter {","        AirportParameter()","    }","}"]},{"anchor":"Matching-with-Regular-Expressions","level":2,"type":"heading","text":"Matching with Regular Expressions"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Regular expressions are a very powerful tool. If you can support regex literals in your tests, they are by far the preferable method to match with."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here’s a trivial example:"}]},{"type":"codeListing","syntax":"swift","code":["When(\/^some (\\w+) by the actor$\/.ignoresCase()) { match, _ in","    XCTAssertEqual(match.1, \"action\")","}"]},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You can use regex builders in Swift to transform into concrete types. It’s a little verbose, but is supported by CucumberSwift."}]}],"type":"aside","name":"NOTE"}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/cucumberswift\/matching-steps"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/Matching-Steps","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Gherkin defined in "},{"type":"codeVoice","code":".feature"},{"type":"text","text":" files can be matched in several ways. All matching is done using global functions that align with gherkin keywords. For example, "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/Given"},{"type":"text","text":", "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/When"},{"type":"text","text":", and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/Then"},{"type":"text","text":" functions. These functions are also localized, so if you’d rather use spanish you can use "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/ES_Dado"},{"type":"text","text":"."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Matching Steps","role":"article","modules":[{"name":"CucumberSwift"}]},"hierarchy":{"paths":[["doc:\/\/CucumberSwift\/documentation\/CucumberSwift"]]},"seeAlsoSections":[{"title":"Discussions","identifiers":["doc:\/\/CucumberSwift\/tutorials\/Tutorial-Table-of-Contents","doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/Generating-Reports","doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/Hooks","doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/CucumberSwift+UIUTest"],"generated":true}],"references":{"doc://CucumberSwift/documentation/CucumberSwift/ES_Dado":{"role":"symbol","title":"ES_Dado","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"ES_Dado"}],"abstract":[],"identifier":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/ES_Dado","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ES_Dado"}],"url":"\/documentation\/cucumberswift\/es_dado"},"doc://CucumberSwift/documentation/CucumberSwift/Hooks":{"role":"article","title":"Hooks","abstract":[{"type":"text","text":"Hooks are used to tie into CucumberSwift’s runtime. They are great for setting up preconditions before a feature, or cleaning up after it is completed."}],"identifier":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/Hooks","kind":"article","type":"topic","url":"\/documentation\/cucumberswift\/hooks"},"doc://CucumberSwift/tutorials/Tutorial-Table-of-Contents":{"role":"overview","title":"Getting Started with CucumberSwift","abstract":[{"type":"text","text":"This getting started series will walk you through installation and basic setup of CucumberSwift on your project."}],"identifier":"doc:\/\/CucumberSwift\/tutorials\/Tutorial-Table-of-Contents","kind":"overview","type":"topic","url":"\/tutorials\/tutorial-table-of-contents"},"doc://CucumberSwift/documentation/CucumberSwift/Then":{"role":"symbol","title":"Then","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"Then"}],"abstract":[],"identifier":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/Then","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Then"}],"url":"\/documentation\/cucumberswift\/then"},"doc://CucumberSwift/documentation/CucumberSwift/When":{"role":"symbol","title":"When","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"When"}],"abstract":[],"identifier":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/When","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"When"}],"url":"\/documentation\/cucumberswift\/when"},"doc://CucumberSwift/documentation/CucumberSwift/Given":{"role":"symbol","title":"Given","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"Given"}],"abstract":[],"identifier":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/Given","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Given"}],"url":"\/documentation\/cucumberswift\/given"},"doc://CucumberSwift/documentation/CucumberSwift/Generating-Reports":{"role":"article","title":"Generating Reports","abstract":[{"type":"text","text":"Reports are an important part of what Cucumber does, it allows us to see the specification in Gherkin executed."}],"identifier":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/Generating-Reports","kind":"article","type":"topic","url":"\/documentation\/cucumberswift\/generating-reports"},"https://github.com/cucumber/cucumber-expressions#readme":{"title":"its own expressions","titleInlineContent":[{"type":"text","text":"its own expressions"}],"type":"link","identifier":"https:\/\/github.com\/cucumber\/cucumber-expressions#readme","url":"https:\/\/github.com\/cucumber\/cucumber-expressions#readme"},"doc://CucumberSwift/documentation/CucumberSwift":{"role":"collection","title":"CucumberSwift","abstract":[{"type":"text","text":"a lightweight Cucumber implementation for iOS, tvOS, and macOS."}],"identifier":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift","kind":"symbol","type":"topic","url":"\/documentation\/cucumberswift"},"https://github.com/nallick/UIUTest":{"title":"UIUTest","titleInlineContent":[{"type":"text","text":"UIUTest"}],"type":"link","identifier":"https:\/\/github.com\/nallick\/UIUTest","url":"https:\/\/github.com\/nallick\/UIUTest"},"doc://CucumberSwift/documentation/CucumberSwift/CucumberSwift+UIUTest":{"role":"article","title":"CucumberSwift+UIUTest","abstract":[{"type":"text","text":"A colleague of mine wrote "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/nallick\/UIUTest"},{"type":"text","text":" which allows for UI testing in a unit testing bundle. It drastically speeds up UI tests but gives a lot of the same functionality, like making sure elements are not covered, able to be tapped etc…"}],"identifier":"doc:\/\/CucumberSwift\/documentation\/CucumberSwift\/CucumberSwift+UIUTest","kind":"article","type":"topic","url":"\/documentation\/cucumberswift\/cucumberswift+uiutest"}}}